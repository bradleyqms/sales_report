# Version Tracking System

## Overview
The web application now displays version information in the header to help you verify you're running the latest deployment.

## Features
- **Live Version Display**: Shows current version, git branch, and commit hash in the top-right corner of the web page
- **Hover for Details**: Hover over the version to see full git commit hash and deployment timestamp
- **Automatic Updates**: Version info updates automatically on each deployment

## How It Works

### For Development
The app automatically detects git information if `version.json` doesn't exist:
- Displays current git branch and commit hash
- Updates dynamically based on your local git repository

### For Production Deployment
Before deploying, run the update script to create a version snapshot:

```powershell
.\update_version.ps1
```

This creates/updates `version.json` with:
- Version number (defaults to 1.0.0, or reads from git tags)
- Git commit hash
- Git branch name
- Deployment timestamp

## Files Added

1. **`version.json`** - Stores version information
   - Auto-generated by `update_version.ps1`
   - Can be manually edited if needed
   - Gitignored in production (recommended)

2. **`update_version.ps1`** - PowerShell script to update version info
   - Run before each deployment
   - Safe to run multiple times
   - Falls back gracefully if git is unavailable

3. **Web UI Changes**:
   - `fastapi_web_app/templates/index.html` - Version display component
   - `fastapi_web_app/static/styles.css` - Version styling
   - `fastapi_web_app/main.py` - `/version` API endpoint

## Usage

### Before Merging to Main
```powershell
# Update version info
.\update_version.ps1

# Commit the changes
git add version.json update_version.ps1 fastapi_web_app/
git commit -m "Add version tracking system"

# Merge to main
git checkout main
git merge feature/deployment-consolidation
git push origin main
```

### Before Each Production Deployment
```powershell
# Update version with latest git info
.\update_version.ps1

# Deploy your application
# (The web app will show the updated version)
```

### Optional: Git Tag Versioning
To use semantic versioning with git tags:

```powershell
# Create a version tag
git tag -a v1.0.1 -m "Release 1.0.1 - Budget fix"
git push origin v1.0.1

# Update version.json (will use tag as version)
.\update_version.ps1
```

## API Endpoint

The version information is available at `/version`:

```bash
curl http://localhost:8000/version
```

Response:
```json
{
  "version": "1.0.0",
  "git_commit": "1e2217b",
  "git_branch": "feature/deployment-consolidation",
  "deployed_at": "2025-12-05T08:56:38.006Z",
  "description": "Sales Report v2"
}
```

## Benefits

1. **Quick Verification**: Instantly see if you're running the latest version
2. **Debugging**: Know exactly which code version is deployed
3. **Audit Trail**: Track when deployments happened
4. **No Manual Updates**: Automatic git integration
5. **Fail-Safe**: Falls back to git detection if version.json is missing
